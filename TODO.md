# TODO - 待办事项

## 🔥 立即可做（高优先级）

### 1. 修复测试环境 [1-2小时]
- [ ] 使用 Docker 运行测试（避免 Windows 中文路径问题）
- [ ] 验证 converters 测试 (image, shape, text)
- [ ] 验证 extractors 测试 (animation, notes)
- [ ] 验证 handlers 测试 (downgrade)
- [ ] 目标: 200+ 测试全部通过

### 2. 实现 PPTX 解析器 [2-3小时]
- [ ] 创建 `src/services/pptx/parser.ts`
- [ ] 实现 PPTX 文件解压
- [ ] 实现 slide XML 解析
- [ ] 实现 element 提取
- [ ] 单元测试

### 3. 实现转换编排器 [2-3小时]
- [ ] 创建 `src/services/conversion/orchestrator.ts`
- [ ] 实现转换流程编排
- [ ] 集成所有转换器
- [ ] 错误处理和重试机制
- [ ] 集成测试

### 4. 实现工作进程 [1-2小时]
- [ ] 完善 `src/services/conversion/worker.ts`
- [ ] 实现任务消费逻辑
- [ ] 实现进度报告
- [ ] 实现 Graceful Shutdown

---

## ⚡ 短期任务（本周内）

### 5. 端到端集成 [2-3小时]
- [ ] 完整的文件上传 → 转换 → 下载流程
- [ ] 集成测试
- [ ] 性能测试
- [ ] 错误场景测试

### 6. API 完善 [1-2小时]
- [ ] 添加请求验证
- [ ] 添加速率限制
- [ ] 添加 CORS 配置
- [ ] 添加 API 文档（Swagger/Redoc）

### 7. 存储服务 [1-2小时]
- [ ] 实现文件清理机制
- [ ] 实现存储配额
- [ ] 添加存储监控
- [ ] 编写存储测试

---

## 📅 中期任务（下周）

### 8. 性能优化
- [ ] 实现转换结果缓存
- [ ] 优化大文件处理
- [ ] 实现流式处理
- [ ] 添加性能监控

### 9. 监控和日志
- [ ] 完善日志结构化
- [ ] 添加 Trace ID
- [ ] 集成 Prometheus 指标
- [ ] 配置告警规则

### 10. 安全加固
- [ ] 添加文件类型验证
- [ ] 添加文件大小限制
- [ ] 添加病毒扫描
- [ ] 添加敏感信息脱敏

---

## 🚀 长期任务（未来迭代）

### 11. 分布式支持
- [ ] Redis 队列实现
- [ ] 分布式锁
- [ ] 多实例部署
- [ ] 负载均衡

### 12. 高级功能
- [ ] 增量转换
- [ ] 批量转换优化
- [ ] 转换模板
- [ ] 自定义转换规则

### 13. 运维和部署
- [ ] Docker 镜像构建
- [ ] Kubernetes 配置
- [ ] CI/CD 流水线
- [ ] 自动化部署

---

## 📝 代码清理

### 14. 重构优化
- [ ] 移除未使用的代码
- [ ] 统一错误处理
- [ ] 优化类型定义
- [ ] 改进代码注释

### 15. 文档完善
- [ ] API 使用文档
- [ ] 架构设计文档
- [ ] 部署运维文档
- [ ] 故障排查指南

---

## 🎯 推荐顺序

1. **先做**: 任务 1（修复测试环境） - 验证现有功能
2. **然后**: 任务 2-4（核心转换） - 实现主要功能
3. **接着**: 任务 5-7（集成和完善） - 让系统可用
4. **最后**: 任务 8-15（优化和扩展） - 持续改进

---

**创建时间**: 2026-01-27 21:40
**预计总工时**: 约 20-30 小时
**建议团队规模**: 1-2 人
