# ============================================
# Application Environment Configuration
# ============================================
# Copy this file to .env and adjust values for your environment

# ===========================
# Environment
# ===========================
NODE_ENV=development
PORT=3000
HOST=0.0.0.0

# ===========================
# File Upload Settings
# ===========================
MAX_FILE_SIZE=104857600
UPLOAD_TEMP_DIR=./temp/uploads

# ===========================
# Task Queue Configuration
# ===========================
# Queue type: memory | redis
QUEUE_TYPE=memory
QUEUE_CONCURRENCY=3
QUEUE_MAX_SIZE=1000
QUEUE_TIMEOUT=300000
TASK_RETENTION_HOURS=24

# ===========================
# Redis Configuration
# ===========================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_VERSION=7-alpine
REDIS_APPENDONLY=yes
REDIS_APPENDFSYNC=everysec
REDIS_MAXMEMORY=512mb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# ===========================
# Storage Configuration
# ===========================
STORAGE_TYPE=local
STORAGE_LOCAL_PATH=./storage
TEMP_DIR=./temp

# ===========================
# PPTist Configuration
# ===========================
PPTIST_DEFAULT_VERSION=latest
PPTIST_SUPPORTED_VERSIONS=latest,4.x

# ===========================
# Logging Configuration
# ===========================
# Log level: error | warn | info | debug
LOG_LEVEL=info
# Log format: json | pretty
LOG_FORMAT=json

# ===========================
# Metrics Configuration
# ===========================
METRICS_ENABLED=true
METRICS_PORT=9090

# ===========================
# Tracing Configuration (Optional)
# ===========================
TRACING_ENABLED=false
TRACING_EXPORTER=otlp
TRACING_ENDPOINT=http://localhost:4318

# ===========================
# CORS Configuration
# ===========================
CORS_ENABLED=true
CORS_ORIGIN=*
CORS_CREDENTIALS=true

# ===========================
# Rate Limiting Configuration
# ===========================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=60000

# ===========================
# Docker Configuration
# ===========================
# Docker build target (development | production | test)
DOCKER_TARGET=production
# Docker image tag
IMAGE_TAG=latest
# Restart policy (no | always | on-failure | unless-stopped)
RESTART_POLICY=unless-stopped

# Resource limits for Docker containers
DOCKER_CPUS=2
DOCKER_MEMORY=2G
DOCKER_CPUS_RESERVE=0.5
DOCKER_MEMORY_RESERVE=512M

# Redis resource limits
REDIS_CPUS=1
REDIS_MEMORY=512M
REDIS_CPUS_RESERVE=0.25
REDIS_MEMORY_RESERVE=128M

# ===========================
# Grafana Configuration (Development Only)
# ===========================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# ===========================
# Security Configuration
# ===========================
# Node.js options
NODE_OPTIONS=--max-old-space-size=2048

# Thread pool size for libuv
UV_THREADPOOL_SIZE=4

# ===========================
# Health Check Configuration
# ===========================
HEALTHCHECK_INTERVAL=30
HEALTHCHECK_TIMEOUT=10
HEALTHCHECK_START_PERIOD=40
HEALTHCHECK_RETRIES=3

